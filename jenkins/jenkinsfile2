pipeline {
    agent none
    options {
        disableConcurrentBuilds()
        buildDiscarder(logRotator(numToKeepStr: '5'))
    }
    stages {
        stage("android-slave") {
            agent {
                label "anroid-slave"
            }
            steps {
                script {
                    cleanNode()
                }
            }
        }
    }
}

def cleanNode() {
    sh 'set +x'
    sh 'mkdir  /home/jenkins/workspace/ts'
    sh 'mkdir  /home/jenkins/workspace/df'
    sh 'mkdir  /home/jenkins/workspace/jh'
    sh 'mkdir  /home/jenkins/workspace/io'
    sh 'mkdir  /home/jenkins/workspace'
    sh 'find /home/jenkins/workspace -mindepth 1 -maxdepth 1 -type d -not -name "test-vf_master" -exec rm -rf {} +'
    sh 'set -x'
}
